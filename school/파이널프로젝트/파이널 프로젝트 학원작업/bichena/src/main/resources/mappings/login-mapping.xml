<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="userDAO">

	<resultMap type="userdto" id="user">
		<id property="u_no" column="U_NO" />
		<result property="u_id" column="U_ID" />
		<result property="u_pw" column="U_PW" />
		<result property="u_name" column="U_NAME" />
		<result property="u_nick" column="U_NICK" />
		<result property="u_gen" column="U_GEN" />
		<result property="u_birth" column="U_BIRTH" />
		<result property="u_tel" column="U_TEL" />
		<result property="u_email" column="U_EMAIL" />
		<result property="addr1" column="ADDR1" />
		<result property="addr2" column="ADDR2" />
		<result property="addr3" column="ADDR3" />
		<result property="u_lev" column="U_LEV" />
		<result property="u_state" column="U_STATE" />
	</resultMap>
	
	<select id="loginSelectOne" resultMap="user">
		SELECT * FROM BC_USERS WHERE U_ID = #{u_id} AND U_PW = #{u_pw}
	</select>
	
	<select id="idFindEmail" resultMap="user">
		SELECT * FROM BC_USERS WHERE U_EMAIL = #{u_email}
	</select>
	
	<select id="idFindPhon" resultMap="user">
		SELECT * FROM BC_USERS WHERE U_TEL = #{u_tel}
	</select>
	
	<select id="pwFind" resultType="java.lang.Integer">
		SELECT COUNT(*) FROM BC_USERS WHERE U_ID = #{u_id}
	</select>
	
	<update id="pwFindStart">
		UPDATE BC_USERS SET U_PW = #{n_pw} WHERE U_ID = #{u_id}
	</update>
	
	<select id="selectPW" resultMap="user">
		SELECT u_pw FROM BC_USERS WHERE U_ID = #{u_id}
	</select>

</mapper>
